<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="menu_style.css" rel="stylesheet">
    <title></title>
</head>
<body>
<h1>Меню</h1>
<div id="menu">
    <div class="menu_item">
        <div id="0" class="menu_item_">
            <img src="https://www.tokyo-city.ru/goods/roll_mozarella_6165f0d805918.jpg" alt="суши">
            <h1>ЗАПЕЧЁННЫЙ РОЛЛ С КРАБОМ И СЫРОМ МОЦАРЕЛЛА</h1>
            <p>Снежный краб, лосось, сыр моцарелла, омлет тамаго, икра масаго, рис, водоросли нори, сливочный сыр, огурец, майонез.</p>
            <div><p>Вес: </p><button>В корзину</button></div>
        </div>
        <div id="1" class="menu_item_">
            <img src="https://www.tokyo-city.ru/goods/roll_mozarella_6165f0d805918.jpg" alt="суши">
            <h1>ЗАПЕЧЁННЫЙ РОЛЛ С КРАБОМ И СЫРОМ МОЦАРЕЛЛА</h1>
            <p>Снежный краб, лосось, сыр моцарелла, омлет тамаго, икра масаго, рис, водоросли нори, сливочный сыр, огурец, майонез.</p>
            <div><p>Вес: </p><button>В корзину</button></div>
        </div>
        <div id="2" class="menu_item_">
            <img src="https://www.tokyo-city.ru/goods/roll_mozarella_6165f0d805918.jpg" alt="суши">
            <h1>ЗАПЕЧЁННЫЙ РОЛЛ С КРАБОМ И СЫРОМ МОЦАРЕЛЛА</h1>
            <p>Снежный краб, лосось, сыр моцарелла, омлет тамаго, икра масаго, рис, водоросли нори, сливочный сыр, огурец, майонез.</p>
            <div><p>Вес: </p><button>В корзину</button></div>
        </div>
    </div>
    <div class="menu_item">
        <div id="3" class="menu_item_">
            <img src="https://www.tokyo-city.ru/goods/roll_mozarella_6165f0d805918.jpg" alt="суши">
            <h1>ЗАПЕЧЁННЫЙ РОЛЛ С КРАБОМ И СЫРОМ МОЦАРЕЛЛА</h1>
            <p>Снежный краб, лосось, сыр моцарелла, омлет тамаго, икра масаго, рис, водоросли нори, сливочный сыр, огурец, майонез.</p>
            <div><p>Вес: </p><button>В корзину</button></div>
        </div>
        <div id="4" class="menu_item_">
            <img src="https://www.tokyo-city.ru/goods/roll_mozarella_6165f0d805918.jpg" alt="суши">
            <h1>ЗАПЕЧЁННЫЙ РОЛЛ С КРАБОМ И СЫРОМ МОЦАРЕЛЛА</h1>
            <p>Снежный краб, лосось, сыр моцарелла, омлет тамаго, икра масаго, рис, водоросли нори, сливочный сыр, огурец, майонез.</p>
            <div><p>Вес: </p> <button>В корзину</button></div>
        </div>
        <div id="5" class="menu_item_">
            <img src="https://www.tokyo-city.ru/goods/roll_mozarella_6165f0d805918.jpg" alt="суши">
            <h1>ЗАПЕЧЁННЫЙ РОЛЛ С КРАБОМ И СЫРОМ МОЦАРЕЛЛА</h1>
            <p>Снежный краб, лосось, сыр моцарелла, омлет тамаго, икра масаго, рис, водоросли нори, сливочный сыр, огурец, майонез.</p>
            <div><p>Вес: </p><button>В корзину</button></div>
        </div>
    </div>
</div>
<div id="pages">
    <button class="dot_btn"><span class="dot"></span></button>
    <button class="dot_btn"><span class="dot"></span></button>
    <button class="dot_btn"><span class="dot"></span></button>
    <button class="dot_btn"><span class="dot"></span></button>
</div>
</body>
<script>
    var array;
    let xhr = new XMLHttpRequest();
    xhr.open('POST', 'https://c5c2-188-244-132-138.ngrok.io', false);
    let dict_ = {'query': 'dishes'}
    xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    xhr.send(JSON.stringify(dict_));
    if (xhr.status !== 200) {
        alert(xhr.status + ': ' + xhr.statusText);
    } else {
        array = JSON.parse(xhr.responseText)
        console.log(array)
        for (let i = 0; i < 6; i++) {
            let el = document.getElementById(i.toString())
            el.innerHTML = '<img src="' + array[i][3] + '" alt="суши">\n' +
                '            <h1>' + array[i][0] + '</h1>\n' +
                '            <p>' + array[i][2] + '</p>\n' +
                '            <div><p>Вес: ' + array[i][1] + '</p><button>В корзину</button></div>'
        }
    }
    let text = ""
    for (let o = 0; o <= array.length / 6; o++){
        text += '<button onclick="set_page(parseInt(this.name))" name="' + o + '" class="dot_btn"><span class="dot"></span></button>'
    }
    document.getElementById("pages").innerHTML = text

    function set_page(n){
        console.log(array)
        for (let j = 0; j < 6; j++) {
            let i = j + n * 6
            let el = document.getElementById(j.toString())
            try {
                el.innerHTML = '<img src="' + array[i][3] + '" alt="суши">\n' +
                    '            <h1>' + array[i][0] + '</h1>\n' +
                    '            <p>' + array[i][2] + '</p>\n' +
                    '            <div><p>Вес: ' + array[i][1] + '</p><button>В корзину</button></div>'
            } catch (e){
                el.innerHTML = ""
            }

        }
    }
</script>
</html>